<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.13"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>MaschinenRata: include/hardware/linesensors.h File Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">MaschinenRata
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.13 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
</script>
<div id="main-nav"></div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><a class="el" href="dir_d44c64559bbebec7f509842c48db8b23.html">include</a></li><li class="navelem"><a class="el" href="dir_73e8f38c45bc714d2c71df9072a2319c.html">hardware</a></li>  </ul>
</div>
</div><!-- top -->
<div class="header">
  <div class="summary">
<a href="#nested-classes">Data Structures</a> &#124;
<a href="#typedef-members">Typedefs</a> &#124;
<a href="#enum-members">Enumerations</a> &#124;
<a href="#func-members">Functions</a> &#124;
<a href="#var-members">Variables</a>  </div>
  <div class="headertitle">
<div class="title">linesensors.h File Reference</div>  </div>
</div><!--header-->
<div class="contents">

<p>Functions to control the linesensors.  
<a href="#details">More...</a></p>
<div class="textblock"><code>#include &lt;stdint.h&gt;</code><br />
</div>
<p><a href="linesensors_8h_source.html">Go to the source code of this file.</a></p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="nested-classes"></a>
Data Structures</h2></td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structlinesensors__t.html">linesensors_t</a></td></tr>
<tr class="memdesc:"><td class="mdescLeft">&#160;</td><td class="mdescRight">Stores the raw sensor data.  <a href="structlinesensors__t.html#details">More...</a><br /></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="typedef-members"></a>
Typedefs</h2></td></tr>
<tr class="memitem:aa570a98ad2a1717ec74ea1d1a917c3b2"><td class="memItemLeft" align="right" valign="top">typedef uint8_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="linesensors_8h.html#aa570a98ad2a1717ec74ea1d1a917c3b2">line_t</a></td></tr>
<tr class="memdesc:aa570a98ad2a1717ec74ea1d1a917c3b2"><td class="mdescLeft">&#160;</td><td class="mdescRight">Stores the boolean state of the line sensors.  <a href="#aa570a98ad2a1717ec74ea1d1a917c3b2">More...</a><br /></td></tr>
<tr class="separator:aa570a98ad2a1717ec74ea1d1a917c3b2"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="enum-members"></a>
Enumerations</h2></td></tr>
<tr class="memitem:ab8af100196e813e8f45013a015da1dc4"><td class="memItemLeft" align="right" valign="top">enum &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="linesensors_8h.html#ab8af100196e813e8f45013a015da1dc4">line_status</a> { <br />
&#160;&#160;<a class="el" href="linesensors_8h.html#ab8af100196e813e8f45013a015da1dc4a64dec3992d128eb947b5210be53f3275">ALL_OFF</a> = 0b00000, 
<a class="el" href="linesensors_8h.html#ab8af100196e813e8f45013a015da1dc4ad6559206fa18d70e41882be07ac8dbe6">ALL_ON</a> = 0b11111, 
<a class="el" href="linesensors_8h.html#ab8af100196e813e8f45013a015da1dc4a1f9aa4684c7aac17f03de7970734f702">ON_TRACK</a> = 0b00100, 
<a class="el" href="linesensors_8h.html#ab8af100196e813e8f45013a015da1dc4a53f811bc46dd28493ccb7260b2cc8f38">CENTERED</a> = 0b01110, 
<br />
&#160;&#160;<a class="el" href="linesensors_8h.html#ab8af100196e813e8f45013a015da1dc4a1965340cd4a127ca8890921d77843b24">RIGHT_TILTED</a> = 0b01000, 
<a class="el" href="linesensors_8h.html#ab8af100196e813e8f45013a015da1dc4a7d1d1aa54aac4e3278b0addf08f4196a">LEFT_TILTED</a> = 0b00010, 
<a class="el" href="linesensors_8h.html#ab8af100196e813e8f45013a015da1dc4aec8379af7490bb9eaaf579cf17876f38">RIGHT</a> = 0b10000, 
<a class="el" href="linesensors_8h.html#ab8af100196e813e8f45013a015da1dc4adb45120aafd37a973140edee24708065">LEFT</a> = 0b00001
<br />
 }<tr class="memdesc:ab8af100196e813e8f45013a015da1dc4"><td class="mdescLeft">&#160;</td><td class="mdescRight">Stores recurrent sensor status.  <a href="linesensors_8h.html#ab8af100196e813e8f45013a015da1dc4">More...</a><br /></td></tr>
</td></tr>
<tr class="separator:ab8af100196e813e8f45013a015da1dc4"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:a837013f1a9236b2adac3ec50adc78d30"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="linesensors_8h.html#a837013f1a9236b2adac3ec50adc78d30">linesensors_init</a> ()</td></tr>
<tr class="memdesc:a837013f1a9236b2adac3ec50adc78d30"><td class="mdescLeft">&#160;</td><td class="mdescRight">Initializes the line sensors.  <a href="#a837013f1a9236b2adac3ec50adc78d30">More...</a><br /></td></tr>
<tr class="separator:a837013f1a9236b2adac3ec50adc78d30"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a43bbfa9ed7dd77f2a884831716f889e9"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="linesensors_8h.html#a43bbfa9ed7dd77f2a884831716f889e9">linesensors_update</a> ()</td></tr>
<tr class="memdesc:a43bbfa9ed7dd77f2a884831716f889e9"><td class="mdescLeft">&#160;</td><td class="mdescRight">Reads all the sensors and updates <a class="el" href="linesensors_8h.html#afd2bcd8421bcac05d90145ffe584748a" title="Variable that stores the current value of the sensors. ">linesensors</a>.  <a href="#a43bbfa9ed7dd77f2a884831716f889e9">More...</a><br /></td></tr>
<tr class="separator:a43bbfa9ed7dd77f2a884831716f889e9"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a444aa45963975b3bb6b7ae4bf0468d25"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="linesensors_8h.html#a444aa45963975b3bb6b7ae4bf0468d25">linesensors_set_threshold</a> (<a class="el" href="structlinesensors__t.html">linesensors_t</a> threshold)</td></tr>
<tr class="memdesc:a444aa45963975b3bb6b7ae4bf0468d25"><td class="mdescLeft">&#160;</td><td class="mdescRight">Sets the threadhold for each sensor.  <a href="#a444aa45963975b3bb6b7ae4bf0468d25">More...</a><br /></td></tr>
<tr class="separator:a444aa45963975b3bb6b7ae4bf0468d25"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a54fcf6b407c273308bf9b0a961570668"><td class="memItemLeft" align="right" valign="top"><a class="el" href="linesensors_8h.html#aa570a98ad2a1717ec74ea1d1a917c3b2">line_t</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="linesensors_8h.html#a54fcf6b407c273308bf9b0a961570668">linesensors_get</a> ()</td></tr>
<tr class="memdesc:a54fcf6b407c273308bf9b0a961570668"><td class="mdescLeft">&#160;</td><td class="mdescRight">Get the boolean values of the sensors.  <a href="#a54fcf6b407c273308bf9b0a961570668">More...</a><br /></td></tr>
<tr class="separator:a54fcf6b407c273308bf9b0a961570668"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="var-members"></a>
Variables</h2></td></tr>
<tr class="memitem:afd2bcd8421bcac05d90145ffe584748a"><td class="memItemLeft" align="right" valign="top"><a class="el" href="structlinesensors__t.html">linesensors_t</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="linesensors_8h.html#afd2bcd8421bcac05d90145ffe584748a">linesensors</a></td></tr>
<tr class="memdesc:afd2bcd8421bcac05d90145ffe584748a"><td class="mdescLeft">&#160;</td><td class="mdescRight">Variable that stores the current value of the sensors.  <a href="#afd2bcd8421bcac05d90145ffe584748a">More...</a><br /></td></tr>
<tr class="separator:afd2bcd8421bcac05d90145ffe584748a"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p>Functions to control the linesensors. </p>
<p>This contains all the functions to interface with the line sensors. Usage example: </p><div class="fragment"><div class="line"><a class="code" href="linesensors_8h.html#aa570a98ad2a1717ec74ea1d1a917c3b2">line_t</a> ls = <a class="code" href="linesensors_8h.html#a54fcf6b407c273308bf9b0a961570668">linesensors_get</a>();</div><div class="line"><span class="keywordflow">if</span>(ls &amp; <a class="code" href="linesensors_8h.html#ab8af100196e813e8f45013a015da1dc4aec8379af7490bb9eaaf579cf17876f38">RIGHT</a>) {</div><div class="line">  <span class="comment">// do something, like rotating right.</span></div><div class="line">}</div></div><!-- fragment --> </div><h2 class="groupheader">Typedef Documentation</h2>
<a id="aa570a98ad2a1717ec74ea1d1a917c3b2"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aa570a98ad2a1717ec74ea1d1a917c3b2">&#9670;&nbsp;</a></span>line_t</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">typedef uint8_t <a class="el" href="linesensors_8h.html#aa570a98ad2a1717ec74ea1d1a917c3b2">line_t</a></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Stores the boolean state of the line sensors. </p>
<p>Each bit of this integer represents a sensor state. The most significant is the right sensor and the least significant is the left sensor. </p>

</div>
</div>
<h2 class="groupheader">Enumeration Type Documentation</h2>
<a id="ab8af100196e813e8f45013a015da1dc4"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ab8af100196e813e8f45013a015da1dc4">&#9670;&nbsp;</a></span>line_status</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">enum <a class="el" href="linesensors_8h.html#ab8af100196e813e8f45013a015da1dc4">line_status</a></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Stores recurrent sensor status. </p>
<p>A enumeration of useful constants that can be used to check for recurrent sensor states. Usually is used in conjunction with the binary and (&amp;) to check the state, for example,</p><div class="fragment"><div class="line">linesensor_get() &amp; <a class="code" href="linesensors_8h.html#ab8af100196e813e8f45013a015da1dc4adb45120aafd37a973140edee24708065">LEFT</a> </div></div><!-- fragment --><p> checks if the left sensor is triggered. </p>
<table class="fieldtable">
<tr><th colspan="2">Enumerator</th></tr><tr><td class="fieldname"><a id="ab8af100196e813e8f45013a015da1dc4a64dec3992d128eb947b5210be53f3275"></a>ALL_OFF&#160;</td><td class="fielddoc"><p>All sensors are off. </p>
</td></tr>
<tr><td class="fieldname"><a id="ab8af100196e813e8f45013a015da1dc4ad6559206fa18d70e41882be07ac8dbe6"></a>ALL_ON&#160;</td><td class="fielddoc"><p>All sensors are on. </p>
</td></tr>
<tr><td class="fieldname"><a id="ab8af100196e813e8f45013a015da1dc4a1f9aa4684c7aac17f03de7970734f702"></a>ON_TRACK&#160;</td><td class="fielddoc"><p>The mid sensor is on. </p>
</td></tr>
<tr><td class="fieldname"><a id="ab8af100196e813e8f45013a015da1dc4a53f811bc46dd28493ccb7260b2cc8f38"></a>CENTERED&#160;</td><td class="fielddoc"><p>The mid sensors are on. </p>
</td></tr>
<tr><td class="fieldname"><a id="ab8af100196e813e8f45013a015da1dc4a1965340cd4a127ca8890921d77843b24"></a>RIGHT_TILTED&#160;</td><td class="fielddoc"><p>The mid-right sensor is on. </p>
</td></tr>
<tr><td class="fieldname"><a id="ab8af100196e813e8f45013a015da1dc4a7d1d1aa54aac4e3278b0addf08f4196a"></a>LEFT_TILTED&#160;</td><td class="fielddoc"><p>The mid-left sensor is on. </p>
</td></tr>
<tr><td class="fieldname"><a id="ab8af100196e813e8f45013a015da1dc4aec8379af7490bb9eaaf579cf17876f38"></a>RIGHT&#160;</td><td class="fielddoc"><p>The right sensor is on. </p>
</td></tr>
<tr><td class="fieldname"><a id="ab8af100196e813e8f45013a015da1dc4adb45120aafd37a973140edee24708065"></a>LEFT&#160;</td><td class="fielddoc"><p>The left sensor is on. </p>
</td></tr>
</table>

</div>
</div>
<h2 class="groupheader">Function Documentation</h2>
<a id="a54fcf6b407c273308bf9b0a961570668"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a54fcf6b407c273308bf9b0a961570668">&#9670;&nbsp;</a></span>linesensors_get()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="linesensors_8h.html#aa570a98ad2a1717ec74ea1d1a917c3b2">line_t</a> linesensors_get </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Get the boolean values of the sensors. </p>
<dl class="section return"><dt>Returns</dt><dd>the boolean output. </dd></dl>

</div>
</div>
<a id="a837013f1a9236b2adac3ec50adc78d30"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a837013f1a9236b2adac3ec50adc78d30">&#9670;&nbsp;</a></span>linesensors_init()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void linesensors_init </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Initializes the line sensors. </p>
<p>Initializes the ADC of the m328p to read the analog values of the pins PB0-PB4. The following configurations were done:</p><ul>
<li>resolution of the ADC: 8bit;</li>
<li>clock divider: CLK/256; </li>
</ul>

</div>
</div>
<a id="a444aa45963975b3bb6b7ae4bf0468d25"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a444aa45963975b3bb6b7ae4bf0468d25">&#9670;&nbsp;</a></span>linesensors_set_threshold()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void linesensors_set_threshold </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structlinesensors__t.html">linesensors_t</a>&#160;</td>
          <td class="paramname"><em>threshold</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Sets the threadhold for each sensor. </p>
<p>When the function <a class="el" href="linesensors_8h.html#a54fcf6b407c273308bf9b0a961570668" title="Get the boolean values of the sensors. ">linesensors_get</a> is called, this threshold level is used to create the boolean output of each sensor. Each sensor value is compared to the threshold, and is evaluated to true if it is bigger than the threshold. There are 5 thresholds, each one for each sensor, for better control.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">threshold</td><td>The threshold value, that will be copied to a static variable. </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="a43bbfa9ed7dd77f2a884831716f889e9"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a43bbfa9ed7dd77f2a884831716f889e9">&#9670;&nbsp;</a></span>linesensors_update()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void linesensors_update </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Reads all the sensors and updates <a class="el" href="linesensors_8h.html#afd2bcd8421bcac05d90145ffe584748a" title="Variable that stores the current value of the sensors. ">linesensors</a>. </p>
<p>All the line sensors are read sequentially from the left to the right and the raw value of each is stored in the global variable <a class="el" href="linesensors_8h.html#afd2bcd8421bcac05d90145ffe584748a" title="Variable that stores the current value of the sensors. ">linesensors</a>. </p>

</div>
</div>
<h2 class="groupheader">Variable Documentation</h2>
<a id="afd2bcd8421bcac05d90145ffe584748a"></a>
<h2 class="memtitle"><span class="permalink"><a href="#afd2bcd8421bcac05d90145ffe584748a">&#9670;&nbsp;</a></span>linesensors</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="structlinesensors__t.html">linesensors_t</a> linesensors</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Variable that stores the current value of the sensors. </p>
<p>Global variable that stores the current value of the sensors. Only updates when a call to <a class="el" href="linesensors_8h.html#a43bbfa9ed7dd77f2a884831716f889e9" title="Reads all the sensors and updates linesensors. ">linesensors_update</a> is done. </p>

</div>
</div>
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.13
</small></address>
</body>
</html>
